{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let LocalizacionComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LocalizacionComponent {\n    constructor(router, el, zone) {\n      this.router = router;\n      this.el = el;\n      this.zone = zone;\n    }\n    ngAfterViewInit() {\n      this.zone.runOutsideAngular(() => {\n        setTimeout(() => {\n          this.initMap();\n          const tiempos = [300, 1000, 2000, 4000];\n          tiempos.forEach(t => setTimeout(() => this.map.invalidateSize(), t));\n        }, 800);\n      });\n    }\n    ensureMapVisible() {\n      const mapContainer = this.el.nativeElement.querySelector('#map');\n      if (!mapContainer) return;\n      const checkSize = setInterval(() => {\n        const {\n          width,\n          height\n        } = mapContainer.getBoundingClientRect();\n        if (width > 0 && height > 0) {\n          clearInterval(checkSize);\n          this.initMap();\n        }\n      }, 100);\n    }\n    initMap() {\n      const angolCoords = [-37.7956, -72.7164];\n      const losSaucesCoords = [-37.9708, -72.8331];\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n      // ðŸ“ Mapa centrado como antes (Angol, zoom 14)\n      this.map = L.map('map', {\n        center: angolCoords,\n        zoom: 14,\n        zoomControl: true,\n        scrollWheelZoom: false,\n        doubleClickZoom: false,\n        dragging: true\n      });\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors',\n        detectRetina: true\n      }).addTo(this.map);\n      const icon = L.icon({\n        iconUrl: 'https://cdn-icons-png.flaticon.com/512/854/854878.png',\n        iconSize: [36, 36],\n        iconAnchor: [18, 36],\n        popupAnchor: [0, -28]\n      });\n      // ðŸŸ¢ Puntos en Angol\n      const puntos = [{\n        nombre: 'Tech Reboot Centro',\n        coords: [-37.795, -72.715]\n      }, {\n        nombre: 'Tech Reboot Norte',\n        coords: [-37.785, -72.715]\n      }, {\n        nombre: 'Tech Reboot Sur',\n        coords: [-37.805, -72.715]\n      }, {\n        nombre: 'Tech Reboot Este',\n        coords: [-37.795, -72.705]\n      }, {\n        nombre: 'Tech Reboot Oeste',\n        coords: [-37.795, -72.725]\n      }];\n      const marcadores = puntos.map(p => L.marker(p.coords, {\n        icon\n      }).bindPopup(`<b>${p.nombre}</b><br>Punto de reciclaje`).addTo(this.map));\n      // ðŸŸ¢ Nuevo punto en Los Sauces\n      const losSaucesMarker = L.marker(losSaucesCoords, {\n        icon\n      }).bindPopup('<b>Tech Reboot Los Sauces</b><br>Punto de reciclaje').addTo(this.map);\n      // ðŸ§­ Flechas sutiles en los bordes del mapa\n      const arrowAngol = L.divIcon({\n        className: 'map-arrow arrow-angol',\n        html: 'â¬…ï¸',\n        iconSize: [40, 40]\n      });\n      const arrowSauces = L.divIcon({\n        className: 'map-arrow arrow-sauces',\n        html: 'âž¡ï¸',\n        iconSize: [40, 40]\n      });\n      // Colocamos las flechas (inicialmente ocultas)\n      const markerAngolArrow = L.marker(this.map.getCenter(), {\n        icon: arrowAngol,\n        interactive: false\n      });\n      const markerSaucesArrow = L.marker(this.map.getCenter(), {\n        icon: arrowSauces,\n        interactive: false\n      });\n      const updateArrows = () => {\n        const center = this.map.getCenter();\n        const distAngol = this.map.distance(center, angolCoords);\n        const distSauces = this.map.distance(center, losSaucesCoords);\n        // Mostrar flecha a Los Sauces si estamos lejos de Los Sauces\n        if (distSauces > 10000) {\n          if (!this.map.hasLayer(markerSaucesArrow)) {\n            markerSaucesArrow.setLatLng(this.map.containerPointToLatLng([this.map.getSize().x - 60, this.map.getSize().y / 2]));\n            markerSaucesArrow.addTo(this.map);\n          }\n        } else {\n          this.map.removeLayer(markerSaucesArrow);\n        }\n        // Mostrar flecha a Angol si estamos lejos de Angol\n        if (distAngol > 10000) {\n          if (!this.map.hasLayer(markerAngolArrow)) {\n            markerAngolArrow.setLatLng(this.map.containerPointToLatLng([60, this.map.getSize().y / 2]));\n            markerAngolArrow.addTo(this.map);\n          }\n        } else {\n          this.map.removeLayer(markerAngolArrow);\n        }\n      };\n      this.map.on('move zoom', updateArrows);\n      updateArrows();\n      // ðŸ” Ajuste visual de tamaÃ±o\n      setTimeout(() => this.map.invalidateSize(true), 800);\n    }\n    ngOnDestroy() {\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n    }\n    static #_ = _staticBlock = () => (this.Éµfac = function LocalizacionComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LocalizacionComponent)(i0.ÉµÉµdirectiveInject(i1.Router), i0.ÉµÉµdirectiveInject(i0.ElementRef), i0.ÉµÉµdirectiveInject(i0.NgZone));\n    }, this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: LocalizacionComponent,\n      selectors: [[\"app-localizacion\"]],\n      decls: 7,\n      vars: 0,\n      consts: [[1, \"container\", \"py-5\", \"animate__animated\", \"animate__fadeIn\"], [1, \"shadow-lg\", \"border-0\", \"rounded-4\", \"mx-auto\", \"mapa-card\"], [1, \"text-success\", \"mb-4\"], [1, \"bi\", \"bi-geo-alt-fill\", \"me-2\"], [1, \"map-wrapper\", \"mb-4\"], [\"id\", \"map\"]],\n      template: function LocalizacionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµdomElementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ÉµÉµdomElement(3, \"i\", 3);\n          i0.ÉµÉµtext(4, \" Explora el mapa para ver los puntos de acopios Tech Reboot \");\n          i0.ÉµÉµdomElementEnd();\n          i0.ÉµÉµdomElementStart(5, \"div\", 4);\n          i0.ÉµÉµdomElement(6, \"div\", 5);\n          i0.ÉµÉµdomElementEnd()()();\n        }\n      },\n      dependencies: [CommonModule, RouterModule],\n      styles: [\".mapa-card[_ngcontent-%COMP%]{width:100%;max-width:1050px;background:#fffffff7;border-radius:20px;box-shadow:0 6px 30px #0000001a;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);margin:0 auto 32px;overflow:hidden;padding:16px 20px;box-sizing:border-box}.map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:5 / 3;border:3px solid #a2d9a2;border-radius:16px;overflow:hidden;box-shadow:0 14px 30px #0b7d3e2e,inset 0 0 12px #0000000d;transition:all .3s ease}.map-wrapper[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 20px 45px #0b7d3e40,inset 0 0 15px #00000014}#map[_ngcontent-%COMP%]{height:100%;width:100%;z-index:1}.leaflet-container[_ngcontent-%COMP%]{width:100%!important;height:100%!important;background:none!important}.leaflet-container[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%], .leaflet-container[_ngcontent-%COMP%]   .leaflet-tile[_ngcontent-%COMP%]{max-width:none!important;image-rendering:auto}h2[_ngcontent-%COMP%]{color:#0b7d3e;font-weight:600;letter-spacing:.5px;text-align:center;margin-bottom:12px}.alert[_ngcontent-%COMP%]{border-radius:10px;font-size:.95rem;background-color:#f8fff9;margin-top:10px}.btn-outline-success[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .3s ease}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#09a955;color:#fff}.animate__fadeIn[_ngcontent-%COMP%]{animation-duration:.9s}@media (max-width: 768px){.mapa-card[_ngcontent-%COMP%]{max-width:100%;margin:0 auto 24px;padding:12px 14px}.map-wrapper[_ngcontent-%COMP%]{aspect-ratio:3 / 4}h2[_ngcontent-%COMP%]{font-size:1.3rem}.btn-outline-success[_ngcontent-%COMP%]{width:100%;text-align:center}}.direction-arrow[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#0b7d3e;text-shadow:1px 1px 6px rgba(255,255,255,.8);white-space:nowrap;pointer-events:none;animation:_ngcontent-%COMP%_bounce 1.8s infinite ease-in-out}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-6mapa-card {width: 100%; max-width: 1050px; background: rgba(255,255,255,.97); border-radius: 20px; box-shadow: 0 6px 30px rgba(0,0,0,.1); backdrop-filter: blur(6px); margin: 0 auto 32px auto; overflow: hidden; padding: 16px 20px; box-sizing: border-box;} .map-wrapper {position: relative; width: 100%; aspect-ratio: 5 / 3; border: 3px solid #a2d9a2; border-radius: 16px; overflow: hidden; box-shadow: 0 14px 30px rgba(11,125,62,.18),inset 0 0 12px rgba(0,0,0,.05); transition: all .3s ease;} .map-wrapper:hover {transform: scale(1.02); box-shadow: 0 20px 45px rgba(11,125,62,.25),inset 0 0 15px rgba(0,0,0,.08);} #map {height: 100%; width: 100%; z-index: 1;} .leaflet-container {width: 100% !important; height: 100% !important; background: none !important;} .leaflet-container .img,.leaflet-container .leaflet-tile {max-width: none !important; image-rendering: auto;} h2 {color: #0b7d3e; font-weight: 600; letter-spacing: .5px; text-align: center; margin-bottom: 12px;} .alert {border-radius: 10px; font-size: .95rem; background-color: #f8fff9; margin-top: 10px;} .btn-outline-success {border-radius: 8px; font-weight: 500; transition: all .3s ease;} .btn-outline-success:hover {background-color: #09a955; color: white;} .animate__fadeIn {animation-duration: .9s;} @media (max-width: 768px) {.mapa-card {max-width: 100%; margin: 0 auto 24px auto; padding: 12px 14px;} .map-wrapper {aspect-ratio: 3 / 4;} h2 {font-size: 1.3rem;} .btn-outline-success {width: 100%; text-align: center;}} .map-arrow {font-size: 2rem; opacity: .8; color: #0b7d3e; text-shadow: 0 0 6px rgba(255,255,255,.9); animation: pulseArrow 1.8s infinite ease-in-out;} @keyframes pulseArrow {0%,100% {transform: scale(1); opacity: .9;} 50% {transform: scale(1.2); opacity: 1;}} px)}}\"]\n    }));\n  }\n  _staticBlock();\n  return LocalizacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}