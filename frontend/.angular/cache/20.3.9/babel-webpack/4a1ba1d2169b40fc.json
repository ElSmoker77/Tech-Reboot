{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/maty_/Desktop/Tech-Reboot2.0/TechReboot2.59/TechReboot/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { errorPrefix, getLogger, getStyleFromHsl } from \"@tsparticles/engine\";\nconst stringStart = 0,\n  defaultOpacity = 1;\nconst currentColorRegex = /(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d.]+%?\\))|currentcolor/gi;\nfunction replaceColorSvg(imageShape, color, opacity) {\n  const {\n    svgData\n  } = imageShape;\n  if (!svgData) {\n    return \"\";\n  }\n  const colorStyle = getStyleFromHsl(color, opacity);\n  if (svgData.includes(\"fill\")) {\n    return svgData.replace(currentColorRegex, () => colorStyle);\n  }\n  const preFillIndex = svgData.indexOf(\">\");\n  return `${svgData.substring(stringStart, preFillIndex)} fill=\"${colorStyle}\"${svgData.substring(preFillIndex)}`;\n}\nexport function loadImage(_x) {\n  return _loadImage.apply(this, arguments);\n}\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(function* (image) {\n    return new Promise(resolve => {\n      image.loading = true;\n      const img = new Image();\n      image.element = img;\n      img.addEventListener(\"load\", () => {\n        image.loading = false;\n        resolve();\n      });\n      img.addEventListener(\"error\", () => {\n        image.element = undefined;\n        image.error = true;\n        image.loading = false;\n        getLogger().error(`${errorPrefix} loading image: ${image.source}`);\n        resolve();\n      });\n      img.src = image.source;\n    });\n  });\n  return _loadImage.apply(this, arguments);\n}\nexport function downloadSvgImage(_x2) {\n  return _downloadSvgImage.apply(this, arguments);\n}\nfunction _downloadSvgImage() {\n  _downloadSvgImage = _asyncToGenerator(function* (image) {\n    if (image.type !== \"svg\") {\n      yield loadImage(image);\n      return;\n    }\n    image.loading = true;\n    const response = yield fetch(image.source);\n    if (!response.ok) {\n      getLogger().error(`${errorPrefix} Image not found`);\n      image.error = true;\n    } else {\n      image.svgData = yield response.text();\n    }\n    image.loading = false;\n  });\n  return _downloadSvgImage.apply(this, arguments);\n}\nexport function replaceImageColor(image, imageData, color, particle) {\n  const svgColoredData = replaceColorSvg(image, color, particle.opacity?.value ?? defaultOpacity),\n    imageRes = {\n      color,\n      gif: imageData.gif,\n      data: {\n        ...image,\n        svgData: svgColoredData\n      },\n      loaded: false,\n      ratio: imageData.width / imageData.height,\n      replaceColor: imageData.replaceColor,\n      source: imageData.src\n    };\n  return new Promise(resolve => {\n    const svg = new Blob([svgColoredData], {\n        type: \"image/svg+xml\"\n      }),\n      domUrl = URL || window.URL || window.webkitURL || window,\n      url = domUrl.createObjectURL(svg),\n      img = new Image();\n    img.addEventListener(\"load\", () => {\n      imageRes.loaded = true;\n      imageRes.element = img;\n      resolve(imageRes);\n      domUrl.revokeObjectURL(url);\n    });\n    const errorHandler = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* () {\n        domUrl.revokeObjectURL(url);\n        const img2 = {\n          ...image,\n          error: false,\n          loading: true\n        };\n        yield loadImage(img2);\n        imageRes.loaded = true;\n        imageRes.element = img2.element;\n        resolve(imageRes);\n      });\n      return function errorHandler() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    img.addEventListener(\"error\", () => void errorHandler());\n    img.src = url;\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}