{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/yoiker/Downloads/TechReboot2.64/TechReboot/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"span\");\n    i0.ÉµÉµtext(1, \"Ingresar\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction LoginComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"span\", 30);\n  }\n}\nfunction LoginComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 31);\n    i0.ÉµÉµelement(1, \"i\", 32);\n    i0.ÉµÉµelementStart(2, \"span\");\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµproperty(\"ngClass\", ctx_r0.estadoMensaje === \"success\" ? \"success\" : \"error\");\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngClass\", ctx_r0.estadoMensaje === \"success\" ? \"bi-check-circle-fill\" : \"bi-exclamation-triangle-fill\");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(ctx_r0.mensaje);\n  }\n}\nconst ADMIN_EMAIL = 'admin@techreboot.cl';\nexport let LoginComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LoginComponent {\n    constructor(auth, router) {\n      this.auth = auth;\n      this.router = router;\n      this.correo = '';\n      this.password = '';\n      this.mensaje = '';\n      this.estadoMensaje = '';\n      this.isSubmitting = false;\n    }\n    login() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.correo || !_this.password) {\n          _this.estadoMensaje = 'error';\n          _this.mensaje = 'Debes ingresar tu correo y contraseÃ±a.';\n          return;\n        }\n        _this.isSubmitting = true;\n        _this.estadoMensaje = '';\n        _this.mensaje = '';\n        const correoNormalizado = _this.correo.trim().toLowerCase();\n        try {\n          const res = yield _this.auth.login({\n            correo: correoNormalizado,\n            password: _this.password\n          });\n          if (res?.token) {\n            localStorage.setItem('token', res.token);\n          }\n          // Guardamos el usuario logueado\n          localStorage.setItem('usuario', correoNormalizado);\n          _this.estadoMensaje = 'success';\n          _this.mensaje = res?.msg ?? 'Inicio de sesiÃ³n exitoso.';\n          // ðŸ”€ RedirecciÃ³n segÃºn tipo de usuario\n          setTimeout(() => {\n            if (correoNormalizado === ADMIN_EMAIL) {\n              // ðŸ‘‘ Admin â†’ panel admin\n              _this.router.navigate(['/admin/componentes']);\n            } else {\n              // ðŸ‘¤ Usuario normal â†’ vista normal\n              _this.router.navigate(['/componentes']);\n            }\n          }, 300);\n        } catch (err) {\n          console.error('Error al iniciar sesiÃ³n:', err);\n          _this.estadoMensaje = 'error';\n          _this.mensaje = err?.error?.msg || 'Correo o contraseÃ±a incorrectos. Intenta nuevamente.';\n        } finally {\n          _this.isSubmitting = false;\n        }\n      })();\n    }\n    static #_ = _staticBlock = () => (this.Éµfac = function LoginComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LoginComponent)(i0.ÉµÉµdirectiveInject(i1.AuthService), i0.ÉµÉµdirectiveInject(i2.Router));\n    }, this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 63,\n      vars: 6,\n      consts: [[1, \"login-background\"], [1, \"gradient-layer\"], [1, \"orb\", \"orb-1\"], [1, \"orb\", \"orb-2\"], [1, \"orb\", \"orb-3\"], [1, \"login-shell\"], [1, \"login-card\", \"animate__animated\", \"animate__fadeIn\"], [1, \"brand-pill\"], [1, \"bi\", \"bi-recycle\"], [1, \"subtitle\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"for\", \"correo\", 1, \"field-label\"], [1, \"input-wrapper\"], [1, \"bi\", \"bi-envelope-fill\"], [\"id\", \"correo\", \"type\", \"email\", \"name\", \"correo\", \"placeholder\", \"usuario@ejemplo.com\", \"autocomplete\", \"email\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\", 1, \"field-label\"], [1, \"bi\", \"bi-shield-lock-fill\"], [\"id\", \"password\", \"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Ingresa tu contrase\\u00F1a\", \"autocomplete\", \"current-password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"btn-spinner\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"class\", \"status-banner\", \"role\", \"alert\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"register-block\"], [\"routerLink\", \"/registro\", 1, \"link\"], [1, \"bi\", \"bi-arrow-right-short\"], [1, \"login-panel\", \"animate__animated\", \"animate__fadeInUp\"], [1, \"benefits\"], [1, \"bi\", \"bi-cpu-fill\"], [1, \"bi\", \"bi-bar-chart-steps\"], [1, \"bi\", \"bi-shield-check\"], [\"aria-hidden\", \"true\", 1, \"btn-spinner\"], [\"role\", \"alert\", 1, \"status-banner\", 3, \"ngClass\"], [1, \"bi\", 3, \"ngClass\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0);\n          i0.ÉµÉµelement(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(5, \"section\", 5)(6, \"article\", 6)(7, \"div\", 7);\n          i0.ÉµÉµelement(8, \"i\", 8);\n          i0.ÉµÉµelementStart(9, \"span\");\n          i0.ÉµÉµtext(10, \"Tech Reboot\");\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(11, \"h1\");\n          i0.ÉµÉµtext(12, \"Bienvenido de nuevo\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(13, \"p\", 9);\n          i0.ÉµÉµtext(14, \" Inicia sesion para continuar registrando y trazando los componentes recuperados. \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(15, \"form\", 10);\n          i0.ÉµÉµlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_15_listener() {\n            return ctx.login();\n          });\n          i0.ÉµÉµelementStart(16, \"label\", 11);\n          i0.ÉµÉµtext(17, \"Correo electronico\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(18, \"div\", 12);\n          i0.ÉµÉµelement(19, \"i\", 13);\n          i0.ÉµÉµelementStart(20, \"input\", 14);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_20_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.correo, $event) || (ctx.correo = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(21, \"label\", 15);\n          i0.ÉµÉµtext(22, \"Contrase\\u00F1a\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(23, \"div\", 12);\n          i0.ÉµÉµelement(24, \"i\", 16);\n          i0.ÉµÉµelementStart(25, \"input\", 17);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_25_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(26, \"button\", 18);\n          i0.ÉµÉµtemplate(27, LoginComponent_span_27_Template, 2, 0, \"span\", 19)(28, LoginComponent_span_28_Template, 1, 0, \"span\", 20);\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµtemplate(29, LoginComponent_div_29_Template, 4, 3, \"div\", 21);\n          i0.ÉµÉµelementStart(30, \"div\", 22)(31, \"span\");\n          i0.ÉµÉµtext(32, \"aun no tienes cuenta?\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(33, \"a\", 23);\n          i0.ÉµÉµtext(34, \" Crear una nueva cuenta \");\n          i0.ÉµÉµelement(35, \"i\", 24);\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(36, \"aside\", 25)(37, \"h3\");\n          i0.ÉµÉµtext(38, \"Reutiliza, registra y haz seguimiento\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(39, \"p\");\n          i0.ÉµÉµtext(40, \" Este panel concentra el inventario vivo de piezas recuperadas. Cada ingreso que haces ayuda a tomar mejores decisiones de reacondicionamiento. \");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(41, \"ul\", 26)(42, \"li\");\n          i0.ÉµÉµelement(43, \"i\", 27);\n          i0.ÉµÉµelementStart(44, \"div\")(45, \"h4\");\n          i0.ÉµÉµtext(46, \"Componentes trazables\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(47, \"p\");\n          i0.ÉµÉµtext(48, \"Asocia cada pieza al responsable y zona para evitar extravios.\");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(49, \"li\");\n          i0.ÉµÉµelement(50, \"i\", 28);\n          i0.ÉµÉµelementStart(51, \"div\")(52, \"h4\");\n          i0.ÉµÉµtext(53, \"Progreso visible\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(54, \"p\");\n          i0.ÉµÉµtext(55, \"Visualiza el avance de recuperacion y metricas del laboratorio.\");\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(56, \"li\");\n          i0.ÉµÉµelement(57, \"i\", 29);\n          i0.ÉµÉµelementStart(58, \"div\")(59, \"h4\");\n          i0.ÉµÉµtext(60, \"Acceso seguro\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(61, \"p\");\n          i0.ÉµÉµtext(62, \"Protegemos tu informacion con credenciales personales y token temporal.\");\n          i0.ÉµÉµelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(20);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.correo);\n          i0.ÉµÉµadvance(5);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.password);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"disabled\", ctx.isSubmitting);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.isSubmitting);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isSubmitting);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.mensaje);\n        }\n      },\n      dependencies: [CommonModule, i3.NgClass, i3.NgIf, FormsModule, i4.ÉµNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, RouterModule, i2.RouterLink, HttpClientModule],\n      styles: [\"[_nghost-%COMP%]{display:block;min-height:100vh;position:relative}.login-background[_ngcontent-%COMP%]{position:fixed;inset:0;overflow:hidden;z-index:0}.gradient-layer[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(circle at top,#d5ffe3,#7fd9a7 45%,#1f824a);opacity:.6}.orb[_ngcontent-%COMP%]{position:absolute;border-radius:50%;filter:blur(1px);opacity:.3;mix-blend-mode:screen;background:radial-gradient(circle,rgba(255,255,255,.8),transparent 70%)}.orb-1[_ngcontent-%COMP%]{width:420px;height:420px;top:-60px;right:-120px}.orb-2[_ngcontent-%COMP%]{width:300px;height:300px;bottom:10%;left:-80px}.orb-3[_ngcontent-%COMP%]{width:200px;height:200px;bottom:-40px;right:20%}.login-shell[_ngcontent-%COMP%]{position:relative;z-index:2;min-height:100vh;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:2.5rem;align-items:center;padding:clamp(2.5rem,7vw,5.5rem) clamp(1.5rem,4vw,4rem)}.login-card[_ngcontent-%COMP%], .login-panel[_ngcontent-%COMP%]{background:#ffffffeb;border-radius:22px;box-shadow:0 20px 70px #09532a2e;padding:clamp(2rem,4vw,3rem);-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px)}.login-card[_ngcontent-%COMP%]{max-width:460px;margin:0 auto}.brand-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.35rem .85rem;border-radius:999px;background:#0b7d3e1f;color:#0b7d3e;font-size:.88rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em}h1[_ngcontent-%COMP%]{font-size:clamp(1.9rem,4vw,2.4rem);margin:1rem 0 .3rem;color:#0b4f2d}.subtitle[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#4f5e56}.field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.35rem;font-weight:600;color:#0b4f2d}.input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:1rem;transform:translateY(-50%);color:#0b7d3e;font-size:1.05rem}input[_ngcontent-%COMP%]{width:100%;padding:.9rem 1rem .9rem 2.8rem;border-radius:12px;border:1px solid rgba(11,125,62,.2);background:#fffffff2;font-size:.98rem;transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0b7d3e;box-shadow:0 0 0 3px #0b7d3e26}button[_ngcontent-%COMP%]{width:100%;border:none;border-radius:12px;padding:.95rem;font-size:1rem;font-weight:600;background:linear-gradient(135deg,#0b7d3e,#09a955);color:#fff;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.6rem}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 12px 25px #09a95559}.btn-spinner[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem;border-radius:50%;border:2px solid rgba(255,255,255,.5);border-top-color:#fff;animation:_ngcontent-%COMP%_spinner .8s linear infinite}.status-banner[_ngcontent-%COMP%]{margin-top:1.25rem;padding:.85rem 1rem;border-radius:12px;display:flex;align-items:center;gap:.7rem;font-weight:500}.status-banner.success[_ngcontent-%COMP%]{background:#0d88481f;color:#0b7d3e}.status-banner.error[_ngcontent-%COMP%]{background:#d9354f1f;color:#b3261e}.register-block[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.95rem;color:#4b4b4b;display:flex;flex-wrap:wrap;gap:.4rem;align-items:center}.register-block[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#0b7d3e;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:.3rem}.register-block[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-panel[_ngcontent-%COMP%]{color:#0f2c1f}.login-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:clamp(1.4rem,3vw,1.8rem);margin-bottom:.6rem}.login-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#3a4c44}.benefits[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:1rem}.benefits[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;border-radius:16px;background:#0b7d3e14}.benefits[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem;color:#0b7d3e}.benefits[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:#0b4f2d}.benefits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0 0;color:#4f5e56;font-size:.9rem}@keyframes _ngcontent-%COMP%_spinner{to{transform:rotate(360deg)}}@media (max-width: 768px){.login-shell[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:2.5rem 1.25rem 3.5rem}.login-panel[_ngcontent-%COMP%]{order:-1}}\"]\n    }));\n  }\n  _staticBlock();\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}