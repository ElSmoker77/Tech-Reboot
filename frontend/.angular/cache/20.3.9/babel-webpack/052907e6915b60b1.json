{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let LocalizacionComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LocalizacionComponent {\n    constructor(router, el, zone) {\n      this.router = router;\n      this.el = el;\n      this.zone = zone;\n    }\n    ngAfterViewInit() {\n      this.zone.runOutsideAngular(() => {\n        setTimeout(() => {\n          this.initMap();\n          const tiempos = [300, 1000, 2000, 4000];\n          tiempos.forEach(t => setTimeout(() => this.map.invalidateSize(), t));\n        }, 800);\n      });\n    }\n    ensureMapVisible() {\n      const mapContainer = this.el.nativeElement.querySelector('#map');\n      if (!mapContainer) return;\n      const checkSize = setInterval(() => {\n        const {\n          width,\n          height\n        } = mapContainer.getBoundingClientRect();\n        if (width > 0 && height > 0) {\n          clearInterval(checkSize);\n          this.initMap();\n        }\n      }, 100);\n    }\n    initMap() {\n      // Centro del mapa en tu coordenada\n      const centroMapa = [-37.855140, -72.692049];\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n      this.map = L.map('map', {\n        center: centroMapa,\n        zoom: 14,\n        zoomControl: true,\n        scrollWheelZoom: false,\n        doubleClickZoom: false,\n        dragging: true\n      });\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors',\n        detectRetina: true\n      }).addTo(this.map);\n      const icon = L.icon({\n        iconUrl: 'assets/Icono_Mapa/icono-reciclaje.png',\n        iconSize: [48, 48],\n        // tamaño recomendado\n        iconAnchor: [24, 48],\n        // ancla inferior al centro\n        popupAnchor: [0, -40] // posiciona el popup arriba del icono\n      });\n      // Puntos de acopio\n      const puntos = [\n      // Punto Angol, Depa Isa\n      {\n        nombre: 'Tech Reboot Centro',\n        coords: [-37.789443, -72.697032]\n      },\n      // Punto Angol, Casa Fercita ñinda <3\n      {\n        nombre: 'Tech Reboot Este',\n        coords: [-37.816015, -72.709995]\n      },\n      // Punto Valle San Juan, Casa Jean\n      {\n        nombre: 'Punto de Acopio Principal',\n        coords: [-37.855140, -72.692049]\n      },\n      // Punto Los Sauces, Casa Maty\n      {\n        nombre: 'Punto de Acopio Los Sauces',\n        coords: [-37.97734679105822, -72.84440895139338]\n      },\n      // Punto Purén, Casa Ale\n      {\n        nombre: 'Punto de Acopio Puren',\n        coords: [-38.03517155770511, -73.06945601405839]\n      }];\n      const marcadores = puntos.map(p => L.marker(p.coords, {\n        icon\n      }).bindPopup(`<b>${p.nombre}</b><br>Punto de reciclaje`).addTo(this.map));\n      const grupo = L.featureGroup(marcadores);\n      const bounds = grupo.getBounds().pad(0.2);\n      this.map.fitBounds(bounds, {\n        animate: true,\n        maxZoom: 14\n      });\n      setTimeout(() => {\n        this.map.invalidateSize(true);\n        this.map.fitBounds(bounds, {\n          animate: true,\n          maxZoom: 14\n        });\n      }, 800);\n    }\n    ngOnDestroy() {\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function LocalizacionComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LocalizacionComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.NgZone));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LocalizacionComponent,\n      selectors: [[\"app-localizacion\"]],\n      decls: 7,\n      vars: 0,\n      consts: [[1, \"container\", \"py-5\", \"animate__animated\", \"animate__fadeIn\"], [1, \"shadow-lg\", \"border-0\", \"rounded-4\", \"mx-auto\", \"mapa-card\"], [1, \"text-success\", \"mb-4\"], [1, \"bi\", \"bi-geo-alt-fill\", \"me-2\"], [1, \"map-wrapper\", \"mb-4\"], [\"id\", \"map\"]],\n      template: function LocalizacionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomElementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ɵɵdomElement(3, \"i\", 3);\n          i0.ɵɵtext(4, \" Explora el mapa para ver los puntos de acopios Tech Reboot \");\n          i0.ɵɵdomElementEnd();\n          i0.ɵɵdomElementStart(5, \"div\", 4);\n          i0.ɵɵdomElement(6, \"div\", 5);\n          i0.ɵɵdomElementEnd()()();\n        }\n      },\n      dependencies: [CommonModule, RouterModule],\n      styles: [\".mapa-card[_ngcontent-%COMP%]{width:100%;max-width:1050px;background:#fffffff7;border-radius:20px;box-shadow:0 6px 30px #0000001a;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);margin:0 auto 32px;overflow:hidden;padding:16px 20px;box-sizing:border-box}.map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:5 / 3;border:3px solid #a2d9a2;border-radius:16px;overflow:hidden;box-shadow:0 14px 30px #0b7d3e2e,inset 0 0 12px #0000000d;transition:all .3s ease}.map-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 20px 45px #0b7d3e40,inset 0 0 15px #00000014}#map[_ngcontent-%COMP%]{height:100%;width:100%;z-index:1}.leaflet-container[_ngcontent-%COMP%]{width:100%!important;height:100%!important;background:none!important}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{transform:scale(1);opacity:.9}50%{transform:scale(1.3);opacity:1}}\"]\n    }));\n  }\n  _staticBlock();\n  return LocalizacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}