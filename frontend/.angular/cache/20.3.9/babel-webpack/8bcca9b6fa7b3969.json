{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let LocalizacionComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LocalizacionComponent {\n    constructor(router, el, zone) {\n      this.router = router;\n      this.el = el;\n      this.zone = zone;\n      this.arrows = L.layerGroup();\n      this.puntos = {\n        angol: {\n          nombre: 'Tech Reboot Angol',\n          coords: [-37.7956, -72.7164]\n        },\n        sauces: {\n          nombre: 'Tech Reboot Los Sauces',\n          coords: [-37.97, -73.03]\n        }\n      };\n    }\n    ngAfterViewInit() {\n      this.zone.runOutsideAngular(() => {\n        setTimeout(() => {\n          this.initMap();\n          // ‚öôÔ∏è Revalida el tama√±o del mapa varias veces tras cargar\n          [300, 1000, 2000, 4000].forEach(t => setTimeout(() => this.map.invalidateSize(), t));\n        }, 800);\n      });\n    }\n    initMap() {\n      const angol = this.puntos.angol.coords;\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n      // üó∫Ô∏è Inicializa centrado en Angol\n      this.map = L.map('map', {\n        center: angol,\n        zoom: 13,\n        zoomControl: true,\n        scrollWheelZoom: true,\n        doubleClickZoom: false,\n        dragging: true\n      });\n      // Capa base\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors',\n        detectRetina: true\n      }).addTo(this.map);\n      // Icono verde de marcador\n      const icon = L.icon({\n        iconUrl: 'https://cdn-icons-png.flaticon.com/512/854/854878.png',\n        iconSize: [36, 36],\n        iconAnchor: [18, 36],\n        popupAnchor: [0, -28]\n      });\n      // üìç Marcadores\n      const markerAngol = L.marker(this.puntos.angol.coords, {\n        icon\n      }).bindPopup('<b>Tech Reboot Angol</b><br>Punto Central').addTo(this.map);\n      const markerSauces = L.marker(this.puntos.sauces.coords, {\n        icon\n      }).bindPopup('<b>Tech Reboot Los Sauces</b><br>Punto de recolecci√≥n').addTo(this.map);\n      // Ajuste de l√≠mites inicial\n      const grupo = L.featureGroup([markerAngol, markerSauces]);\n      const bounds = grupo.getBounds().pad(0.25);\n      this.map.fitBounds(bounds, {\n        animate: true,\n        maxZoom: 13\n      });\n      // Capa para flechas\n      this.arrows.addTo(this.map);\n      // Escucha eventos para actualizar flechas\n      this.map.on('moveend zoomend', () => this.updateArrows());\n    }\n    /** üî∞ Muestra una flecha hacia Angol o Los Sauces si est√°n fuera de la vista */\n    updateArrows() {\n      this.arrows.clearLayers();\n      const bounds = this.map.getBounds();\n      const center = this.map.getCenter();\n      const addArrow = targetCoords => {\n        const target = L.latLng(targetCoords);\n        // Solo crear la flecha si el punto no est√° visible\n        if (!bounds.contains(target)) {\n          const angle = Math.atan2(target.lng - center.lng, target.lat - center.lat);\n          // Posici√≥n donde aparecer√° la flecha (ligeramente fuera del centro)\n          const distance = 0.12;\n          const arrowLat = center.lat + distance * Math.sin(angle);\n          const arrowLng = center.lng + distance * Math.cos(angle);\n          // Icono ‚û§\n          const arrowIcon = L.divIcon({\n            className: 'arrow-icon',\n            html: '‚û§',\n            iconSize: [24, 24]\n          });\n          const arrow = L.marker([arrowLat, arrowLng], {\n            icon: arrowIcon\n          }).addTo(this.arrows);\n          // Rotar la flecha hacia el punto objetivo\n          const el = arrow.getElement();\n          if (el) {\n            const deg = angle * 180 / Math.PI;\n            el.style.transform = `rotate(${deg}deg)`;\n          }\n        }\n      };\n      // üîπ Flecha a Angol\n      addArrow(this.puntos.angol.coords);\n      // üîπ Flecha a Los Sauces\n      addArrow(this.puntos.sauces.coords);\n    }\n    ngOnDestroy() {\n      if (this.map) {\n        this.map.off();\n        this.map.remove();\n      }\n    }\n    static #_ = _staticBlock = () => (this.…µfac = function LocalizacionComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LocalizacionComponent)(i0.…µ…µdirectiveInject(i1.Router), i0.…µ…µdirectiveInject(i0.ElementRef), i0.…µ…µdirectiveInject(i0.NgZone));\n    }, this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: LocalizacionComponent,\n      selectors: [[\"app-localizacion\"]],\n      decls: 7,\n      vars: 0,\n      consts: [[1, \"container\", \"py-5\", \"animate__animated\", \"animate__fadeIn\"], [1, \"shadow-lg\", \"border-0\", \"rounded-4\", \"mx-auto\", \"mapa-card\"], [1, \"text-success\", \"mb-4\"], [1, \"bi\", \"bi-geo-alt-fill\", \"me-2\"], [1, \"map-wrapper\", \"mb-4\"], [\"id\", \"map\"]],\n      template: function LocalizacionComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µdomElementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.…µ…µdomElement(3, \"i\", 3);\n          i0.…µ…µtext(4, \" Explora el mapa para ver los puntos de acopios Tech Reboot \");\n          i0.…µ…µdomElementEnd();\n          i0.…µ…µdomElementStart(5, \"div\", 4);\n          i0.…µ…µdomElement(6, \"div\", 5);\n          i0.…µ…µdomElementEnd()()();\n        }\n      },\n      dependencies: [CommonModule, RouterModule],\n      styles: [\".mapa-card[_ngcontent-%COMP%]{width:100%;max-width:1050px;background:#fffffff7;border-radius:20px;box-shadow:0 6px 30px #0000001a;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);margin:0 auto 32px;overflow:hidden;padding:16px 20px;box-sizing:border-box}.map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:5 / 3;border:3px solid #a2d9a2;border-radius:16px;overflow:hidden;box-shadow:0 14px 30px #0b7d3e2e,inset 0 0 12px #0000000d;transition:all .3s ease}.map-wrapper[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 20px 45px #0b7d3e40,inset 0 0 15px #00000014}#map[_ngcontent-%COMP%]{height:100%;width:100%;z-index:1}.leaflet-container[_ngcontent-%COMP%]{width:100%!important;height:100%!important;background:none!important}h2[_ngcontent-%COMP%]{color:#0b7d3e;font-weight:600;letter-spacing:.5px;text-align:center;margin-bottom:16px;font-family:Segoe UI,Arial,sans-serif}.arrow-icon[_ngcontent-%COMP%]{color:#0b7d3e;font-size:1.8rem;font-weight:700;text-shadow:0 0 8px rgba(255,255,255,.9);pointer-events:none;animation:_ngcontent-%COMP%_pulseArrow 1.4s infinite ease-in-out;transform-origin:center center}@keyframes _ngcontent-%COMP%_pulseArrow{0%,to{opacity:.6;transform:scale(1)}50%{opacity:1;transform:scale(1.25)}}@media (max-width: 768px){.mapa-card[_ngcontent-%COMP%]{max-width:100%;margin:0 auto 24px;padding:12px 14px}.map-wrapper[_ngcontent-%COMP%]{aspect-ratio:3 / 4}h2[_ngcontent-%COMP%]{font-size:1.25rem}}\"]\n    }));\n  }\n  _staticBlock();\n  return LocalizacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}