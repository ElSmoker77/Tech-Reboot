{"ast":null,"code":"import { AlterType, getRandom, getRangeValue, half, rangeColorToHsl } from \"@tsparticles/engine\";\nimport { RollMode } from \"./RollMode.js\";\nconst double = 2,\n  doublePI = Math.PI * double,\n  maxAngle = 360;\nexport function initParticle(engine, particle) {\n  const rollOpt = particle.options.roll;\n  if (!rollOpt?.enable) {\n    particle.roll = {\n      enable: false,\n      horizontal: false,\n      vertical: false,\n      angle: 0,\n      speed: 0\n    };\n    return;\n  }\n  particle.roll = {\n    enable: rollOpt.enable,\n    horizontal: rollOpt.mode === RollMode.horizontal || rollOpt.mode === RollMode.both,\n    vertical: rollOpt.mode === RollMode.vertical || rollOpt.mode === RollMode.both,\n    angle: getRandom() * doublePI,\n    speed: getRangeValue(rollOpt.speed) / maxAngle\n  };\n  if (rollOpt.backColor) {\n    particle.backColor = rangeColorToHsl(engine, rollOpt.backColor);\n  } else if (rollOpt.darken.enable && rollOpt.enlighten.enable) {\n    const alterType = getRandom() >= half ? AlterType.darken : AlterType.enlighten;\n    particle.roll.alter = {\n      type: alterType,\n      value: getRangeValue(alterType === AlterType.darken ? rollOpt.darken.value : rollOpt.enlighten.value)\n    };\n  } else if (rollOpt.darken.enable) {\n    particle.roll.alter = {\n      type: AlterType.darken,\n      value: getRangeValue(rollOpt.darken.value)\n    };\n  } else if (rollOpt.enlighten.enable) {\n    particle.roll.alter = {\n      type: AlterType.enlighten,\n      value: getRangeValue(rollOpt.enlighten.value)\n    };\n  }\n}\nexport function updateRoll(particle, delta) {\n  const roll = particle.options.roll,\n    data = particle.roll;\n  if (!data || !roll?.enable) {\n    return;\n  }\n  const speed = data.speed * delta.factor,\n    max = doublePI;\n  data.angle += speed;\n  if (data.angle > max) {\n    data.angle -= max;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}