{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/yoiker/Downloads/TechReboot2.58/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { SolicitudAfiliadoService } from '../../services/solicitud-afiliado.service';\nlet SolicitudAfiliadoComponent = class SolicitudAfiliadoComponent {\n  constructor(service, router) {\n    this.service = service;\n    this.router = router;\n    this.solicitud = {\n      nombreCompleto: '',\n      correo: '',\n      telefono: '',\n      direccion: '',\n      ciudad: '',\n      region: '',\n      tipoOrganizacion: '',\n      descripcionOrganizacion: '',\n      capacidadAlmacenamiento: '',\n      experienciaReciclaje: false,\n      certificaciones: '',\n      compromisoAmbiental: false,\n      disponibilidadHoraria: '',\n      mensajeAdicional: ''\n    };\n    this.toastVisible = false;\n    this.toastMensaje = '';\n    this.toastTipo = 'success';\n    this.isSubmitting = false;\n    this.requisitos = [{\n      id: 'experiencia',\n      label: 'Tener experiencia previa en reciclaje o gestión de residuos',\n      checked: false\n    }, {\n      id: 'espacio',\n      label: 'Contar con espacio físico adecuado para almacenamiento temporal',\n      checked: false\n    }, {\n      id: 'compromiso',\n      label: 'Compromiso con el cuidado del medio ambiente',\n      checked: false\n    }, {\n      id: 'disponibilidad',\n      label: 'Disponibilidad para recibir materiales en horarios establecidos',\n      checked: false\n    }];\n  }\n  enviar(form) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!form.valid) {\n        _this.mostrarToast('Por favor, completa todos los campos requeridos', 'error');\n        return;\n      }\n      // Validar requisitos\n      const requisitosCompletos = _this.requisitos.every(r => r.checked);\n      if (!requisitosCompletos) {\n        _this.mostrarToast('Debes aceptar todos los requisitos para enviar la solicitud', 'error');\n        return;\n      }\n      // Validar checkboxes del formulario\n      if (!_this.solicitud.experienciaReciclaje || !_this.solicitud.compromisoAmbiental) {\n        _this.mostrarToast('Debes confirmar tu experiencia y compromiso ambiental', 'error');\n        return;\n      }\n      _this.isSubmitting = true;\n      try {\n        const datosEnvio = {\n          ..._this.solicitud,\n          requisitosAceptados: _this.requisitos.map(r => ({\n            id: r.id,\n            aceptado: r.checked\n          }))\n        };\n        yield _this.service.enviarSolicitud(datosEnvio);\n        _this.mostrarToast('¡Solicitud enviada correctamente! Te contactaremos pronto.', 'success');\n        // Resetear formulario\n        _this.solicitud = {\n          nombreCompleto: '',\n          correo: '',\n          telefono: '',\n          direccion: '',\n          ciudad: '',\n          region: '',\n          tipoOrganizacion: '',\n          descripcionOrganizacion: '',\n          capacidadAlmacenamiento: '',\n          experienciaReciclaje: false,\n          certificaciones: '',\n          compromisoAmbiental: false,\n          disponibilidadHoraria: '',\n          mensajeAdicional: ''\n        };\n        _this.requisitos.forEach(r => r.checked = false);\n        form.resetForm();\n        // Redirigir después de 3 segundos\n        setTimeout(() => {\n          _this.router.navigate(['/inicio']);\n        }, 3000);\n      } catch (err) {\n        console.error('Error al enviar solicitud:', err);\n        _this.mostrarToast(err?.error?.msg || 'Error al enviar la solicitud. Por favor, intenta nuevamente.', 'error');\n      } finally {\n        _this.isSubmitting = false;\n      }\n    })();\n  }\n  mostrarToast(mensaje, tipo) {\n    this.toastMensaje = mensaje;\n    this.toastTipo = tipo;\n    this.toastVisible = true;\n    setTimeout(() => {\n      this.toastVisible = false;\n    }, 5000);\n  }\n  volver() {\n    this.router.navigate(['/inicio']);\n  }\n};\nSolicitudAfiliadoComponent = __decorate([Component({\n  selector: 'app-solicitud-afiliado',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  providers: [SolicitudAfiliadoService],\n  templateUrl: './solicitud-afiliado.component.html',\n  styleUrls: ['./solicitud-afiliado.component.css']\n})], SolicitudAfiliadoComponent);\nexport { SolicitudAfiliadoComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}