{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/maty_/Desktop/Tech-Reboot2.0/TechReboot2.59/TechReboot2.59/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = a0 => ({\n  \"has-error\": a0\n});\nfunction RegistroComponent_small_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"El nombre es obligatorio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_small_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"Ingresa un correo valido.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_small_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 32);\n    i0.ɵɵtext(1, \"La contrase\\u00F1a es obligatoria.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 33);\n    i0.ɵɵtext(2, \" Registrar usuario \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegistroComponent_span_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 34);\n  }\n}\nfunction RegistroComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵelement(1, \"i\", 36);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.estadoMensaje === \"success\" ? \"success\" : \"error\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.estadoMensaje === \"success\" ? \"bi-check-circle-fill\" : \"bi-exclamation-circle-fill\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.mensaje);\n  }\n}\nexport let RegistroComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class RegistroComponent {\n    constructor(auth, router) {\n      this.auth = auth;\n      this.router = router;\n      this.user = {\n        nombre: '',\n        correo: '',\n        password: ''\n      };\n      this.mensaje = '';\n      this.estadoMensaje = '';\n      this.isSubmitting = false;\n    }\n    registrar(form) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (form.invalid) {\n          form.form.markAllAsTouched();\n          _this.estadoMensaje = 'error';\n          _this.mensaje = 'Completa todos los campos obligatorios.';\n          return;\n        }\n        _this.isSubmitting = true;\n        _this.estadoMensaje = '';\n        _this.mensaje = '';\n        const payload = {\n          nombre: _this.user.nombre.trim(),\n          correo: _this.normalizarCorreo(_this.user.correo),\n          password: _this.user.password\n        };\n        try {\n          const res = yield _this.auth.register(payload);\n          _this.estadoMensaje = 'success';\n          _this.mensaje = res?.msg || 'Usuario registrado correctamente.';\n          form.resetForm();\n          _this.user = {\n            nombre: '',\n            correo: '',\n            password: ''\n          };\n          setTimeout(() => _this.router.navigate(['/login']), 1800);\n        } catch (error) {\n          console.error('�?O Error al registrar:', error);\n          _this.estadoMensaje = 'error';\n          if (error?.status === 403) {\n            // Bloqueo de registro de correos admin\n            _this.mensaje = error?.error?.msg || 'No se permite el registro de cuentas de administrador.';\n          } else if (error?.status === 400) {\n            _this.mensaje = error?.error?.msg || 'Este correo ya esta registrado.';\n          } else {\n            _this.mensaje = error?.error?.msg || 'Error al registrar el usuario. Intenta mas tarde.';\n          }\n        } finally {\n          _this.isSubmitting = false;\n        }\n      })();\n    }\n    volver() {\n      this.router.navigate(['/login']);\n    }\n    normalizarCorreo(value) {\n      return value?.trim().toLowerCase();\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function RegistroComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || RegistroComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RegistroComponent,\n      selectors: [[\"app-registro\"]],\n      decls: 72,\n      vars: 19,\n      consts: [[\"form\", \"ngForm\"], [1, \"register-background\"], [1, \"gradient-layer\"], [1, \"orb\", \"orb-1\"], [1, \"orb\", \"orb-2\"], [1, \"register-shell\"], [1, \"registro-card\", \"animate__animated\", \"animate__fadeIn\"], [1, \"brand-pill\"], [1, \"bi\", \"bi-person-plus-fill\"], [1, \"subtitle\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"for\", \"nombre\", 1, \"field-label\"], [1, \"input-wrapper\", 3, \"ngClass\"], [1, \"bi\", \"bi-person-fill\"], [\"type\", \"text\", \"id\", \"nombre\", \"name\", \"nombre\", \"placeholder\", \"Ej: Jean Herrera\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"helper-text\", 4, \"ngIf\"], [\"for\", \"correo\", 1, \"field-label\"], [1, \"bi\", \"bi-envelope-open-fill\"], [\"type\", \"email\", \"id\", \"correo\", \"name\", \"correo\", \"placeholder\", \"ejemplo@correo.com\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\", 1, \"field-label\"], [1, \"bi\", \"bi-shield-lock-fill\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Minimo 6 caracteres\", \"minlength\", \"6\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [1, \"acciones\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"btn-spinner\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-ghost\", 3, \"click\"], [1, \"bi\", \"bi-arrow-left-circle\", \"me-2\"], [\"class\", \"status-banner\", \"role\", \"alert\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"register-panel\", \"animate__animated\", \"animate__fadeInUp\"], [1, \"steps\"], [1, \"step-number\"], [1, \"helper-text\"], [1, \"bi\", \"bi-person-check-fill\", \"me-2\"], [\"aria-hidden\", \"true\", 1, \"btn-spinner\"], [\"role\", \"alert\", 1, \"status-banner\", 3, \"ngClass\"], [1, \"bi\", 3, \"ngClass\"]],\n      template: function RegistroComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1);\n          i0.ɵɵelement(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"section\", 5)(5, \"article\", 6)(6, \"div\", 7);\n          i0.ɵɵelement(7, \"i\", 8);\n          i0.ɵɵelementStart(8, \"span\");\n          i0.ɵɵtext(9, \"Crear cuenta\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"h2\");\n          i0.ɵɵtext(11, \"Activa tu perfil Tech Reboot\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"p\", 9);\n          i0.ɵɵtext(13, \" Completa tus datos para comenzar a registrar componentes y seguir su ciclo de vida. \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"form\", 10, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function RegistroComponent_Template_form_ngSubmit_14_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const form_r2 = i0.ɵɵreference(15);\n            return i0.ɵɵresetView(ctx.registrar(form_r2));\n          });\n          i0.ɵɵelementStart(16, \"label\", 11);\n          i0.ɵɵtext(17, \"Nombre completo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 12);\n          i0.ɵɵelement(19, \"i\", 13);\n          i0.ɵɵelementStart(20, \"input\", 14);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_20_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.user.nombre, $event) || (ctx.user.nombre = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(21, RegistroComponent_small_21_Template, 2, 0, \"small\", 15);\n          i0.ɵɵelementStart(22, \"label\", 16);\n          i0.ɵɵtext(23, \"Correo electronico\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 12);\n          i0.ɵɵelement(25, \"i\", 17);\n          i0.ɵɵelementStart(26, \"input\", 18);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_26_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.user.correo, $event) || (ctx.user.correo = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(27, RegistroComponent_small_27_Template, 2, 0, \"small\", 15);\n          i0.ɵɵelementStart(28, \"label\", 19);\n          i0.ɵɵtext(29, \"Contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 12);\n          i0.ɵɵelement(31, \"i\", 20);\n          i0.ɵɵelementStart(32, \"input\", 21);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_32_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.user.password, $event) || (ctx.user.password = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(33, RegistroComponent_small_33_Template, 2, 0, \"small\", 15);\n          i0.ɵɵelementStart(34, \"div\", 22)(35, \"button\", 23);\n          i0.ɵɵtemplate(36, RegistroComponent_span_36_Template, 3, 0, \"span\", 24)(37, RegistroComponent_span_37_Template, 1, 0, \"span\", 25);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"button\", 26);\n          i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_38_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.volver());\n          });\n          i0.ɵɵelement(39, \"i\", 27);\n          i0.ɵɵtext(40, \" Volver \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(41, RegistroComponent_div_41_Template, 4, 3, \"div\", 28);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"aside\", 29)(43, \"h3\");\n          i0.ɵɵtext(44, \"Un registro pensado para el laboratorio\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"p\");\n          i0.ɵɵtext(46, \" Manten sincronizados tus componentes con el flujo de reacondicionamiento. Asignamos cada pieza a un responsable para que el seguimiento sea claro. \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(47, \"ol\", 30)(48, \"li\")(49, \"span\", 31);\n          i0.ɵɵtext(50, \"1\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(51, \"div\")(52, \"h4\");\n          i0.ɵɵtext(53, \"Ingresa tus datos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"p\");\n          i0.ɵɵtext(55, \"Usamos tu correo institucional para identificarte dentro del sistema.\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(56, \"li\")(57, \"span\", 31);\n          i0.ɵɵtext(58, \"2\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"div\")(60, \"h4\");\n          i0.ɵɵtext(61, \"Registra componentes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(62, \"p\");\n          i0.ɵɵtext(63, \"Agrega cada pieza indicando categoria, estado y responsable.\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(64, \"li\")(65, \"span\", 31);\n          i0.ɵɵtext(66, \"3\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(67, \"div\")(68, \"h4\");\n          i0.ɵɵtext(69, \"Monitorea avances\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(70, \"p\");\n          i0.ɵɵtext(71, \"Consulta el inventario filtrado por tu usuario y mantenga el control.\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          const form_r2 = i0.ɵɵreference(15);\n          i0.ɵɵadvance(18);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c0, form_r2.submitted && !ctx.user.nombre));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.nombre);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", form_r2.submitted && !ctx.user.nombre);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(15, _c0, form_r2.submitted && !ctx.user.correo));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.correo);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", form_r2.submitted && !ctx.user.correo);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, form_r2.submitted && !ctx.user.password));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.password);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", form_r2.submitted && !ctx.user.password);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.isSubmitting);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isSubmitting);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isSubmitting);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.mensaje);\n        }\n      },\n      dependencies: [CommonModule, i3.NgClass, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.NgModel, i4.NgForm, HttpClientModule],\n      styles: [\"[_nghost-%COMP%]{display:block;min-height:100vh;position:relative}.register-background[_ngcontent-%COMP%]{position:fixed;inset:0;overflow:hidden;z-index:0}.gradient-layer[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#e4fff2,#b7f1ce 45%,#78cfa0);opacity:.85}.orb[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,.8),transparent 70%);opacity:.35;filter:blur(2px)}.orb-1[_ngcontent-%COMP%]{width:350px;height:350px;top:-40px;right:15%}.orb-2[_ngcontent-%COMP%]{width:240px;height:240px;bottom:-60px;left:10%}.register-shell[_ngcontent-%COMP%]{position:relative;z-index:2;min-height:100vh;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:2.5rem;align-items:center;padding:clamp(2.5rem,6vw,5rem) clamp(1.5rem,4vw,4rem)}.registro-card[_ngcontent-%COMP%], .register-panel[_ngcontent-%COMP%]{background:#fffffff0;border-radius:24px;padding:clamp(2rem,4vw,3rem);box-shadow:0 20px 60px #09532a26;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px)}.registro-card[_ngcontent-%COMP%]{max-width:520px;margin:0 auto}.brand-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .9rem;border-radius:999px;background:#09a9551f;color:#0b7d3e;font-weight:600;letter-spacing:.08em;text-transform:uppercase;font-size:.85rem}h2[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:#0b4f2d;font-size:clamp(1.8rem,3.5vw,2.2rem)}.subtitle[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#4f5e56}.field-label[_ngcontent-%COMP%]{display:block;margin-top:1rem;margin-bottom:.35rem;font-weight:600;color:#0b4f2d}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:1rem;transform:translateY(-50%);color:#0b7d3e}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.95rem 1rem .95rem 2.8rem;border-radius:14px;border:1px solid rgba(11,125,62,.2);background:#fffffff7;font-size:1rem;transition:border-color .2s ease,box-shadow .2s ease}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0b7d3e;box-shadow:0 0 0 3px #0b7d3e26}.input-wrapper.has-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#c9302c}.helper-text[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.85rem;color:#c9302c}.acciones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.8rem;margin-top:1.5rem}.btn-primary[_ngcontent-%COMP%], .btn-ghost[_ngcontent-%COMP%]{flex:1;min-width:180px;border-radius:14px;padding:1rem;font-size:1rem;font-weight:600;border:none;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.4rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0b7d3e,#09a955);color:#fff;box-shadow:0 10px 25px #0b7d3e4d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]:not(:disabled):hover, .btn-ghost[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.btn-ghost[_ngcontent-%COMP%]{background:#0b7d3e14;color:#0b7d3e}.btn-spinner[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem;border-radius:50%;border:2px solid rgba(255,255,255,.4);border-top-color:#fff;animation:_ngcontent-%COMP%_spinner .8s linear infinite}.status-banner[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem 1.1rem;border-radius:16px;display:flex;align-items:center;gap:.7rem;font-weight:500}.status-banner.success[_ngcontent-%COMP%]{background:#0d88481f;color:#0b7d3e}.status-banner.error[_ngcontent-%COMP%]{background:#d9354f1f;color:#b3261e}.register-panel[_ngcontent-%COMP%]{color:#0f2c1f}.register-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:clamp(1.5rem,3vw,2rem);margin-bottom:.7rem}.register-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#3a4c44}.steps[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:1rem}.steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;border-radius:18px;background:#fffc;box-shadow:inset 0 0 0 1px #0b7d3e14}.step-number[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;background:#0b7d3e1f;color:#0b7d3e;font-weight:700;display:inline-flex;align-items:center;justify-content:center;font-size:1.1rem}.steps[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#0b4f2d}.steps[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0 0;color:#4f5e56;font-size:.92rem}@keyframes _ngcontent-%COMP%_spinner{to{transform:rotate(360deg)}}@media (max-width: 768px){.register-shell[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:2.5rem 1.25rem 3.5rem}.acciones[_ngcontent-%COMP%]{flex-direction:column}.btn-primary[_ngcontent-%COMP%], .btn-ghost[_ngcontent-%COMP%]{width:100%}.register-panel[_ngcontent-%COMP%]{order:-1}}\"]\n    }));\n  }\n  _staticBlock();\n  return RegistroComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}